{% extends 'base.html' %}
{% load static i18n %}

{% block content %}
<div class="Middle Middle_top">
    <div class="Middle-top">
        <div class="wrap">
            <div class="Middle-header">
                <h1 class="Middle-title">{% trans 'Account' %}
                </h1>
                <ul class="breadcrumbs Middle-breadcrumbs">
                    <li class="breadcrumbs-item"><a href="index.html">{% trans 'Home' %}</a>
                    </li>
                    <li class="breadcrumbs-item breadcrumbs-item_current"><span>{% trans 'Account' %}</span>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="Section Section_column Section_columnLeft">
        <div class="wrap">

            {% include 'profiles/navigation.html' %}

            <div class="Section-content">
                <div class="Account">
                    <div class="Account-group account_section">
                        <div class="Account-column">
                            {% if request.user.profile.avatar %}
                            <div class="Account-avatar">
                                <img src="{{ request.user.profile.avatar.url }}" alt="card.jpg"/>
                            </div>
                            {% endif %}
                        </div>
                        <div class="Account-column">
                            <div class="Account-name">
                                <div class="account-column__row">{{ account.last_name }} {{ account.first_name }} {{
                                    account.profile.patronymic }}
                                </div>
                                <div class="account-column__row">{{ account.profile.phone_number }}</div>
                                <div class="account-column__row">{{ account.email }}</div>
                            </div>
                            <a class="Account-editLink" href="{% url 'profile' %}">{% trans 'Edit' %}</a>
                        </div>
                    </div>
                    <div class="Account-group">
                        <div class="Account-column Account-column_full">
                            {% for order in orders %}
                            <div class="Order Order_anons">
                                <div class="Order-personal">
                                    <div class="row">
                                        <div class="row-block">
                                            <a class="Order-title" href="{# url order detail #}">
                                                {% trans 'Order' %}&#32;
                                                <span class="Order-numberOrder">â„–{{ order.pk }}</span>
                                                &#32;{% trans 'From' %}&#32;
                                                <span class="Order-dateOrder">{{ order.date_time }}</span>
                                            </a>
                                        </div>
                                        <div class="row-block">
                                            <div class="Order-info Order-info_delivery">
                                                <div class="Order-infoType">{% trans 'Delivery type' %}:
                                                </div>
                                                <div class="Order-infoContent">{{ order.delivery.name }}
                                                </div>
                                            </div>
                                            <div class="Order-info Order-info_pay">
                                                <div class="Order-infoType">{% trans 'Payment' %}:
                                                </div>
                                                <div class="Order-infoContent">{{ order.payment.name }}
                                                </div>
                                            </div>
                                            <div class="Order-info">
                                                <div class="Order-infoType">{% trans 'Total price' %}:
                                                </div>
                                                <div class="Order-infoContent">
                                                    <span class="Order-price">{{ order.total_sum }}</span>
                                                </div>
                                            </div>
                                            <div class="Order-info Order-info_status">
                                                <div class="Order-infoType">{% trans 'Status' %}:
                                                </div>
                                                <div class="Order-infoContent">
                                                    {{ order.payment_state }}
                                                </div>
                                            </div>
                                            {% if order.payment_errors %}
                                            <div class="Order-info Order-info_error">
                                                <div class="Order-infoType">{% trans 'Not paid' %}:
                                                </div>
                                                <div class="Order-infoContent">
                                                    {{ order.payment_errors }}
                                                </div>
                                            </div>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="Account-group">
                        <div class="Account-column Account-column_full">
                            <header class="Section-header">
                                <h2 class="Section-title">{% trans 'View history' %}
                                </h2>
                            </header>
                            <div class="Cards Cards_account">
                                {% for product in view_history %}
                                <div class="Card">
                                    <a class="Card-picture" href="{# url product detail #}">
                                        {% if product.good_images.first %}
                                        <img src="{{ product.good_images.first.image.url }}"
                                             alt="{{ product.name }} image"/>
                                        {% else %}
                                        <img src="{% static 'img/content/home/pepe.jpg' %}" alt="pepe.jpg"/>
                                        {% endif %}
                                    </a>
                                    <div class="Card-content">
                                        <strong class="Card-title"><a href="#">{{ product.name }}</a>
                                        </strong>
                                        <div class="Card-description">
                                            <div class="Card-cost"><span class="Card-priceOld">{{ product.biggest_price }}</span><span
                                                    class="Card-price">{{ product.lowest_price }}</span>
                                            </div>
                                            <div class="Card-category">{{ product.category }}
                                            </div>
                                            <div class="Card-hover">
                                                <a class="Card-btn" href="{# url add to favorites #}">
                                                    <img src="{% static 'img/icons/card/bookmark.svg' %}"
                                                         alt="bookmark.svg"/>
                                                </a>

                                                <a class="Card-btn" href="{# url add to cart #}">
                                                    <img src="{% static 'img/icons/card/cart.svg' %}" alt="cart.svg"/>
                                                </a>

                                                <a class="Card-btn" href="{# url add to compare #}">
                                                    <img src="{% static 'img/icons/card/change.svg' %}"
                                                         alt="change.svg"/>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="Card-sale">{{ product.prices_diff }}
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                            <div class="Account-editLink Account-editLink_view">
                                <a href="{% url 'historyview' %}">{% trans 'Full list' %}</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
